<%= render 'shared/validation_errors' %>

<%= form_for group do |f| %>

  <div class="row">
    <div class="small-8 columns">
      <label>Name</label>
      <%= f.text_field :name %>
    </div>
  </div>

  <div class="row">
    <div class="small-8 columns">
      <label>Description</label>
      <%= f.text_area :description, rows: 4, placeholder: "Enter a brief project description" %>
    </div>
  </div>

  <div class="row">
    <div class="small-8 columns">
      <h4>Add New Members</h4>
      <p>
        Please list the email address of each new group member on separate line
        in the box below.
      </p>
      <%= f.text_area :members, rows: 4,
        placeholder: "Enter email address of each member on a separate line." %>
    </div>
  </div>

  <!-- Section for setting up group members -->
  <% if group.users.present? %>
    <div class="row">
      <div class="small-12 columns">
        <h4>Group Members</h4>
        <p>
          The group members are listed below. As a default starting point, the
          group owner is also a member of the group.
        </p>

        <table class='full-width'>
          <thead>
            <th>First name</th>
            <th>Last name</th>
            <th>Email address</th>
            <th>Remove</th>
          </thead>
          <tbody>
            <% group.users.each do |user| %>
              <tr>
                <td><%= user.first_name %></td>
                <td><%= user.last_name %></td>
                <td><%= user.email %></td>
                <td clsss="center">
                  <%= check_box_tag "group[user_ids][]", user.id %>
                </td>
              </tr>
            <% end %>
           </tbody>
        </table>

      </div>
    </div>


  <% end %>

  <% resources = resource_list(user_id: current_user.id,
    group: group, class: Group::RESOURCE_CLASS) %>

  <% if resources.present? %>
    <div class="row">
      <div class="small-12 columns">
        <h4><%= Group::RESOURCE_CLASS %> Access</h4>
        <p>
          Group members will be able to access those resources that you
          indicate in the checklist below. Please note that access to these
          resources will also give them access to other items related to
          the resource.
        </p>
        <% resources.each do |resource| %>
          <%= check_box_tag "group[resource_ids][]", resource[:id], resource[:related] %>
          <%= resource[:label] %>
          <br/>
        <% end %>
      </div>
    </div>
  <% end %>


  <div class="form-actions">
    <%= f.submit nil, class: 'success-button' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                groups_path, class: 'cancel-button' %>
  </div>
<% end %>
